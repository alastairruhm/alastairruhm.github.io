<!doctype html>
<html lang="zh-cn">
<head>

    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.48" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>侧链研究笔记 | Into the Unknown</title>
    <meta property="og:title" content="侧链研究笔记 - Into the Unknown">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content="2018-07-20T00:00:00&#43;08:00">
        
        
    <meta property="article:modified_time" content="2018-07-20T00:00:00&#43;08:00">
        
    <meta name="Keywords" content="">
    <meta name="description" content="侧链研究笔记">
        
    <meta name="author" content="ruhm">
    <meta property="og:url" content="https://blog.ruhm.me/post/20180720-note-on-sidechain/">
    <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="../../css/normalize.css">
    
    <link rel="stylesheet" href="../../css/prism.css">
    
    <link rel="stylesheet" href="../../css/style.css">
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://blog.ruhm.me">
                        Into the Unknown
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://blog.ruhm.me">首页</a>
                    
                    <a  href="../../archives/" title="归档">归档</a>
                    
                    <a  href="../../about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    <article class="post">
                        <header>
                            <h1 class="post-title">侧链研究笔记</h1>
                        </header>
                        <date class="post-meta meta-date">
                            2018年7月20日
                            00:00
                        </date>
                        
                        <div class="post-meta meta-category">
                            |
                            
                                <a href="../../categories/%E5%8C%BA%E5%9D%97%E9%93%BE">区块链</a>
                            
                        </div>
                        
                        
                        <div class="post-content">
                            

<h1 id="侧链研究笔记">侧链研究笔记</h1>

<h2 id="问题清单">问题清单</h2>

<h3 id="1-为什么需要这个技术-它解决什么已知的问题">1. 为什么需要这个技术？它解决什么已知的问题？</h3>

<p>侧链协议产生的原动力其实来源于其他区块链的创新威胁。侧链诞生前，众多“山寨币”的出现正在碎片化整个数字货币市场，再加上以太坊等项目的竞争，一些比特币开发者希望能借助侧链的形式扩展比特币的底层协议。</p>

<p>侧链（Sidechain）协议允许资产在比特币区块链和其他区块链之间互转。这一项目也来自比特币社区，最早是在 2013 年 12 月提出，2014 年 4 月立项，由 Blockstream 公司（由比特币核心开发者 Adam Back、Matt Corallo 等共同发起成立）主导研发。侧链协议于 2014 年 10 月在白皮书《Enabling Blockchain Innovations with Pegged Sidechains》中公开。</p>

<h3 id="2-它的概念是什么-涉及到哪些内容">2. 它的概念是什么？涉及到哪些内容？</h3>

<p>简单来讲，以比特币区块链作为主链（Parent chain），其他区块链作为侧链，二者通过双向挂钩（Two-way peg），可实现比特币从主链转移到侧链进行流通。</p>

<p>侧链的核心原理在于能够冻结一条链上的资产，然后在另一条链上产生，可以通过多种方式来实现。</p>

<p>主要技术要点：</p>

<ul>
<li>双向挂钩：侧链协议的设计难点在于如何让资产在主链和侧链之间安全流转。简而言之，接受资产的链必须确保发送资产的链上的币被可靠锁定。双向挂钩也是侧链技术的核心原理。</li>
<li>SPV 证明：Simplified Payment Verification：侧链协议中，用 SPV 来证明一个交易确实已经在区块链中发生过，称为 SPV 证明（SPV Proof）。一个 SPV 证明包括两部分内容：一组区块头的列表，表示工作量证明；一个特定输出（output）确实存在于某个区块中的密码学证明。</li>
</ul>

<p>详见结尾处附录</p>

<h3 id="3-整个技术发展的历史是什么样子">3. 整个技术发展的历史是什么样子？</h3>

<p>2012年，在比特币聊天室中，首次出现了关于侧链概念的相关讨论。当时比特币的核心开发团队正在考虑如何可以安全的升级比特币协议，以增加新的功能，但是直接在比特币区块链上进行功能添加比较危险，因为如果新功能在实践中发生软件故障，则会对现有的比特币网络造成严重影响。另外，由于比特币的网络结构特性，如果进行较大规模的改动，还需要获得多数比特币矿工的支持。这时，比特币核心开发者便提出了侧链方案。这种技术允许开发人员将新功能附加在其他的区块链，但是这些区块链仍然附着在现有比特币区块链上。这些区块链中新功能可以充分利用现有比特币的网络特性，而不会对现有的比特币网络造成危害。</p>

<p>2014年，侧链协议诞生前已经出现了许多具有新功能的区块链，并产生了各种竞争币及&rdquo;山寨币&rdquo;，如莱特币、狗狗币等。这时，比特币的核心开发团队担心这些竞争币的产生会稀释比特币的价值及对整个加密货币市场造成碎片化的情况，同时，以太坊等一些项目的加入竞争。他们认为，应该把比特币作为一种储备货币，并将新功能添加到侧链上，以侧链的形式扩展比特币的底层协议。这样如果用户想使用其他的新的区块链功能，就不需要购买其他代币。</p>

<p>2014年7月，以太坊众筹，获得了价值1.4亿人民币的比特币，还有20%的以太币，开发团队获得了巨大的回报。但是比特币核心开发组并没有因为他们辛勤工作获得可观回报，为应对其他创新的区块链，如以太坊区块链（Ethereum）区块链、比特股（Bitshares）区块链等带来的智能合约及各种去中心化应用的兴起，受到大量人们追捧，反观基于比特币的应用就因为开发难度大，项目少，而对比特币造成威胁。同时，比特币核心开发组亦不欢迎基于比特币区块链的附生链，以技术方法曾一度将OP_RETURN的数据区减少至40，逼使附生链的开发团队改用其他方式在比特币交易中附带数据。</p>

<p>因此，为了实现商业化价值，并将侧链由概念转化成现实，Adam Back、Matt Corallo等比特币核心开发者共同发起成立了BlockStream 公司。</p>

<p>2014年10月，BlockStream发布了白皮书《Enabling Blockchain Innovations with Pegged Sidechains》。首次明确提出了侧链的概念及其协议实现方案。中文意思是「用与比特币挂钩的侧链来提供区块链创新」。</p>

<p><strong>核心观点是：「比特币」的区块链在概念上独立于作为资产的比特币。他希望通过技术能支持在不同的区块链上转移资产，这样新的系统可以重用原先的比特币。</strong></p>

<p>Adam Back 提出一个侧链(Sidechain)的概念并列出了侧链的一些属性:</p>

<blockquote>
<ol>
<li>一个用户在一条链上的资产被转移到另一条链上后，还应该可以转移回到原先链上的同一用户名下；</li>
<li>资产转移应该没有对方卷款逃跑的风险，也就是不诚实的用户没能力阻碍资产转移的发生；</li>
<li>资产的转移必须是原子操作，也就是要么全发生，要么不发生。不应该出现丢失资产或欺诈性增加资产的情况；</li>
<li>侧链间应该有防火墙。一条侧链上的软件错误造成链上资产的丢失或增加不会影响另一条链上的资产的丢失或增加；</li>
<li>即使在资产的转移过程中发生区块链的重组，也不应出现问题。任何因区块链重组造成的中断，应该局限在本条侧链上而不应影响其他区块链。通常侧链之间最好能相互独立，用户可以从其他链条提供数据。只有当存在明确的侧链的共识规则时才需要去检查另一条侧链来对其验证；</li>
<li>用户不应需要跟踪不经常使用的侧链；</li>
</ol>
</blockquote>

<p>2017年1月，Blockstream 发表文章《Strong Federations: An Interoperable Blockchain Solution to Centralized Third Party Risks》，对侧链早期白皮书的补充和改良。白皮书中着重描述了联合挂钩（Federated Pegs）的相关概念和应用。</p>

<h3 id="4-市场是是否已经有相关技术的应用-优缺点">4. 市场是是否已经有相关技术的应用，优缺点？</h3>

<p>基于比特币网络的</p>

<ul>
<li>ConsenSys 的 BTC Relay</li>
<li>Rootstock</li>
<li>BlockStream 的 liquid （基于Elements平台）</li>
</ul>

<p>非比特币的：</p>

<ul>
<li>Lisk</li>
<li>Asch <a href="http://www.asch.so/#home">http://www.asch.so/#home</a></li>
</ul>

<p>详细的比较分析见：侧链跨链研究报告 | 鲸准研究院 <a href="https://static.36kr.com/201805/29065819/npjsk24pzl2emqcs.pdf">https://static.36kr.com/201805/29065819/npjsk24pzl2emqcs.pdf</a></p>

<h3 id="5-这个技术最新的方向是什么">5. 这个技术最新的方向是什么？</h3>

<p>（待补充）</p>

<h3 id="补充问题-1-侧链和跨链技术有什么异同">补充问题 1. 侧链和跨链技术有什么异同？</h3>

<p>侧链是跨链的一种实现方式。</p>

<blockquote>
<p>一般的侧链服务于主链，而跨链志在链之间价值和功能的连通，可以说，侧链与跨链，在技术内容上大体相似，只在谈到他们所服务的对象时才需要做细致的区分</p>
</blockquote>

<p>详见 侧链跨链研究报告 | 鲸准研究院 <a href="https://static.36kr.com/201805/29065819/npjsk24pzl2emqcs.pdf">https://static.36kr.com/201805/29065819/npjsk24pzl2emqcs.pdf</a></p>

<h2 id="附-技术要点">附：技术要点</h2>

<h3 id="spv-证明">SPV 证明</h3>

<p>前面章节所述，在比特币系统中验证交易时，涉及到交易合法性检查、双重花费检查、脚本检查等。由于验证过程需要完整的 UTXO 记录，通常要由运行着完整功能节点的矿工来完成。</p>

<p>而很多时候，用户只关心与自己相关的那些交易，比如当用户收到其他人号称发来的比特币时，只希望能够知道交易是否合法、是否已在区块链中存在了足够的时间（即获得足够的确认），而不需要自己成为完整节点做出完整验证。</p>

<p>中本聪设计的简单支付验证（Simplified Payment Verification，SPV）可以实现这一点。SPV 能够以较小的代价判断某个支付交易是否已经被验证过（存在于区块链中），以及得到了多少算力保护（定位包含该交易的区块在区块链中的位置）。SPV 客户端只需要下载所有区块的区块头（Block Header），并进行简单的定位和计算工作就可以给出验证结论。</p>

<p>侧链协议中，用 SPV 来证明一个交易确实已经在区块链中发生过，称为 SPV 证明（SPV Proof）。一个 SPV 证明包括两部分内容：一组区块头的列表，表示工作量证明；一个特定输出（output）确实存在于某个区块中的密码学证明。</p>

<h3 id="双向挂钩">双向挂钩</h3>

<p>侧链协议的设计难点在于如何让资产在主链和侧链之间安全流转。简而言之，接受资产的链必须确保发送资产的链上的币被可靠锁定。</p>

<p><img src="media/15317115157542/15318820993197.png" alt="15318820993197-w641" /></p>

<p>具体，协议采用双向挂钩机制实现比特币向侧链转移和返回。主链和侧链需要对对方的特定交易做 SPV 验证。完整过程如下：</p>

<ul>
<li>当用户要向侧链转移比特币时，首先在主链创建交易，待转移的比特币被发往一个特殊的输出。这些比特币在主链上被锁定。</li>
<li>等待一段确认期，使得上述交易获得足够的工作量确认。</li>
<li>用户在侧链创建交易提取比特币，需要在这笔交易的输入指明上述主链被锁定的输出，并提供足够的 SPV 证明。</li>
<li>等待一段竞争期，防止双重花费攻击。</li>
<li>比特币在侧链上自由流通。</li>
<li>当用户想让比特币返回主链时，采取类似的反向操作。首先在侧链创建交易，待返回的比特币被发往一个特殊的输出。先等待一段确认期后，在主链用足够的对侧链输出的 SPV 证明来解锁最早被锁定的输出。竞争期过后，主链比特币恢复流通。</li>
</ul>

<h2 id="资料清单">资料清单</h2>

<ul>
<li>Enabling Blockchain Innovations with Pegged Sidechains 侧链白皮书 <a href="https://www.blockstream.com/sidechains.pdf">https://www.blockstream.com/sidechains.pdf</a></li>
<li>Strong Federations: An Interoperable Blockchain Solution to Centralized Third Party Risks 对侧链早期白皮书的补充和改良 <a href="https://arxiv.org/pdf/1612.05491.pdf">https://arxiv.org/pdf/1612.05491.pdf</a></li>
<li>侧链白皮书翻译：<a href="http://www.8btc.com/enabling-blockchain-innovations-with-pegged-sidechains-abstract-introduction">http://www.8btc.com/enabling-blockchain-innovations-with-pegged-sidechains-abstract-introduction</a></li>
<li>区块链Blockchain - 侧链Sidechain | Samson&rsquo;s Blog: <a href="https://www.samsonhoi.com/470/blockchain-sidechain">https://www.samsonhoi.com/470/blockchain-sidechain</a></li>
<li>BTC-Relay与RootStock侧链技术对比: <a href="http://www.8btc.com/btc-relay-and-rootstock">http://www.8btc.com/btc-relay-and-rootstock</a></li>
<li>十分钟讲清楚区块链侧链技术: <a href="https://mp.weixin.qq.com/s/hrJt3ZAT1lkV7pTQiBAGeQ">https://mp.weixin.qq.com/s/hrJt3ZAT1lkV7pTQiBAGeQ</a></li>
<li>轻松理解比特币侧链机制: <a href="https://www.jianshu.com/p/f8ba3f51dc6c">https://www.jianshu.com/p/f8ba3f51dc6c</a></li>
<li>在区块链侧链上进行Dapp技术开发: <a href="https://zhuanlan.zhihu.com/p/24805302">https://zhuanlan.zhihu.com/p/24805302</a></li>
<li>有人能能简单说明比特币侧链（sidechain）究竟是什麽东西吗？ - 知乎: <a href="https://www.zhihu.com/question/27256432">https://www.zhihu.com/question/27256432</a></li>
<li>什么是区块链的侧链？现在侧链的技术有哪些？ - 知乎: <a href="https://www.zhihu.com/question/53159953">https://www.zhihu.com/question/53159953</a></li>
<li>什么是多链、侧链、跨链？ - 知乎: <a href="https://www.zhihu.com/question/277647043/answer/394740054">https://www.zhihu.com/question/277647043/answer/394740054</a></li>
<li>侧链跨链研究报告_火星财经: <a href="http://www.huoxing24.com/newsdetail/2018042710484969469.html">http://www.huoxing24.com/newsdetail/2018042710484969469.html</a></li>
<li>轻松理解比特币侧链机制 - 简书: <a href="https://www.jianshu.com/p/f8ba3f51dc6c">https://www.jianshu.com/p/f8ba3f51dc6c</a></li>
<li>区块链中一个重要的链：侧链 — Steemit: <a href="https://steemit.com/cn/@monkeyplayfire/62v4en">https://steemit.com/cn/@monkeyplayfire/62v4en</a></li>
<li>侧链 · 区块链技术指南: <a href="https://yeasy.gitbooks.io/blockchain_guide/content/bitcoin/sidechain.html">https://yeasy.gitbooks.io/blockchain_guide/content/bitcoin/sidechain.html</a></li>
<li>侧链(sidechain) | 巴比特专题: <a href="http://www.8btc.com/sidechain/page/4">http://www.8btc.com/sidechain/page/4</a></li>
</ul>

                        </div>

                        


                        <div class="post-meta meta-tags">
                            
                            <ul class="clearfix">
                                
                                <li><a href="../../tags/%E4%BE%A7%E9%93%BE">侧链</a></li>
                                
                            </ul>
                            
                        </div>
                    </article>
                    
                </div>
            </div>
            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://blog.ruhm.me">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
        <ul class="widget-list">
            
            <li>
                <a href="https://blog.ruhm.me/post/20180818-intro-to-userscript/" title="简单入门 userscript">简单入门 userscript</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180720-note-on-sidechain/" title="侧链研究笔记">侧链研究笔记</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180718-ipfs-white-paper/" title="[翻译] IPFS 白皮书">[翻译] IPFS 白皮书</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180716-understanding-the-ipfs-white-paper-part-2/" title="[翻译] 理解 IPFS 白皮书 第一部分">[翻译] 理解 IPFS 白皮书 第一部分</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180703-ipfs-command-usage/" title="ipfs 技术原理">ipfs 技术原理</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180702-ipfs-private-network/" title="ipfs 私有网络环境搭建">ipfs 私有网络环境搭建</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180701-install-ipfs/" title="ipfs 安装">ipfs 安装</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180612-python-string-formation/" title="python 字符串格式化">python 字符串格式化</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/20180314-flink-run-in-local-mode-osx/" title="flink 在 OSX 系统上以 local 方式运行">flink 在 OSX 系统上以 local 方式运行</a>
            </li>
            
            <li>
                <a href="https://blog.ruhm.me/post/datadog_jvm_monitor/" title="datadog 关于 JVM 监控的分析">datadog 关于 JVM 监控的分析</a>
            </li>
            
        </ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">分类</h3>
        <ul class="widget-list">
            
            <li>
                <a href="../../categories/ipfs/">ipfs(5)</a>
            </li>
            
            <li>
                <a href="../../categories/%E5%8C%BA%E5%9D%97%E9%93%BE/">区块链(1)</a>
            </li>
            
        </ul>
    </section>

    <section class="widget">
            <h3 class="widget-title">标签</h3>
            <div class="tagcloud">
                
                <a href="../../tags//"></a>
                
                <a href="../../tags/centos/">CentOS</a>
                
                <a href="../../tags/bigdata/">bigdata</a>
                
                <a href="../../tags/chrome/">chrome</a>
                
                <a href="../../tags/datadog/">datadog</a>
                
                <a href="../../tags/flink/">flink</a>
                
                <a href="../../tags/git/">git</a>
                
                <a href="../../tags/github/">github</a>
                
                <a href="../../tags/gitlab/">gitlab</a>
                
                <a href="../../tags/golang/">golang</a>
                
                <a href="../../tags/grafana/">grafana</a>
                
                <a href="../../tags/graph-database/">graph database</a>
                
                <a href="../../tags/headless/">headless</a>
                
                <a href="../../tags/heapster/">heapster</a>
                
                <a href="../../tags/ipfs/">ipfs</a>
                
                <a href="../../tags/jvm/">jvm</a>
                
                <a href="../../tags/kubernetes/">kubernetes</a>
                
                <a href="../../tags/memo/">memo</a>
                
                <a href="../../tags/monitor/">monitor</a>
                
                <a href="../../tags/neo4j/">neo4j</a>
                
                <a href="../../tags/nodejs/">nodejs</a>
                
                <a href="../../tags/nosql/">nosql</a>
                
                <a href="../../tags/pip/">pip</a>
                
                <a href="../../tags/prometheus/">prometheus</a>
                
                <a href="../../tags/proxy/">proxy</a>
                
                <a href="../../tags/pyenv/">pyenv</a>
                
                <a href="../../tags/python/">python</a>
                
                <a href="../../tags/regex/">regex</a>
                
                <a href="../../tags/sequelize/">sequelize</a>
                
                <a href="../../tags/sql/">sql</a>
                
                <a href="../../tags/test/">test</a>
                
                <a href="../../tags/%E4%BE%A7%E9%93%BE/">侧链</a>
                
                <a href="../../tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">单例模式</a>
                
                <a href="../../tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
                
                <a href="../../tags/%E7%9B%91%E6%8E%A7/">监控</a>
                
            </div>
        </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="../../index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2018 <a href="https://blog.ruhm.me">Into the Unknown</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io">Hugo</a>.
        <a href="http://www.flysnow.org/">Theme</a> based on <a href="https://github.com/rujews/maupassant-hugo">maupassant</a>.
        
    </div>
</footer>


<script type="text/javascript" src="../../js/prism.js" async="true"></script>
<script type="text/javascript">
window.MathJax = {
    tex2jax: {
        inlineMath: [ ['$','$'] ],
        processEscapes: true
    }
};
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top" class="show"></a>
<script type="text/javascript" src="../../js/totop.js?v=0.0.0" async=""></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-125246338-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>
